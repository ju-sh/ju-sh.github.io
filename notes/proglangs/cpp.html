<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>CPP</title>
  <style>
    body {
      max-width: 38rem;
      padding: 2rem;
      margin: auto;
      background-color: #FAF0E6;
    }
    table, th, td {
      border: 1px solid black;
      border-collapse: collapse;
    }
  </style>

</head>
<body>


<div id="header">
<a href="https://ju-sh.github.io">Home</a>
 | 
<a href="https://ju-sh.github.io/blog/index.html">Blog</a>
 | 
<a href="https://ju-sh.github.io/wiki/index.html">Wiki</a>
 | 
<a href="https://ju-sh.github.io/about.html">About</a>
</div>

<header id="title-block-header">
<h1 class="title">CPP</h1>
</header>

<ul>
    </ul>




<hr/>

<div id="content-container">
<p><a href="https://github.com/yuchdev/CppBooks">https://github.com/yuchdev/CppBooks</a></p>
<h2 id="general">General</h2>
<h2 id="regex-c11"><code>regex</code> (C++11)</h2>
<ul>
<li><p>Available as a standard library since C++11.</p></li>
<li><p><a href="https://en.cppreference.com/w/cpp/regex">https://en.cppreference.com/w/cpp/regex</a></p></li>
<li><p>Type of regexes: <code>std::regex</code></p></li>
<li><p>Find match in string for a regex: <code>std::regex_search(str, rgx)</code></p></li>
</ul>
<h2 id="auto-variables"><code>auto</code> variables</h2>
<ul>
<li>Type inferred from context.</li>
<li>This new meaning introduced in C++11.</li>
<li>In C, <code>auto</code> remains only as a storage class specifier.</li>
</ul>
<p>Links:</p>
<ul>
<li><a href="https://en.cppreference.com/w/cpp/language/auto">https://en.cppreference.com/w/cpp/language/auto</a></li>
<li><a href="https://stackoverflow.com/questions/7576953/c-auto-keyword-why-is-it-magic">https://stackoverflow.com/questions/7576953/c-auto-keyword-why-is-it-magic</a></li>
<li><a href="https://learn.microsoft.com/en-us/cpp/cpp/auto-cpp?view=msvc-170">https://learn.microsoft.com/en-us/cpp/cpp/auto-cpp?view=msvc-170</a></li>
</ul>
<h2 id="vector"><code>vector</code></h2>
<ul>
<li>Default value of elements of a <code>vector&lt;T&gt;</code> is <code>0</code></li>
</ul>
<div class="sourceCode" id="cb1"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true"></a><span class="pp">#include</span><span class="im">&lt;iostream&gt;</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true"></a><span class="pp">#include</span><span class="im">&lt;vector&gt;</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true"></a><span class="dt">int</span> main() {</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true"></a>    <span class="bu">std::</span>vector&lt;<span class="dt">int</span>&gt; v1 = {<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>};</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true"></a>    <span class="bu">std::</span>cout &lt;&lt; v1[<span class="dv">0</span>] &lt;&lt; <span class="bu">std::</span>endl;  <span class="co">// 1</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true"></a>    <span class="bu">std::</span>vector&lt;<span class="dt">int</span>&gt; v2(<span class="dv">3</span>);</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true"></a>    <span class="bu">std::</span>cout &lt;&lt; v2[<span class="dv">0</span>] &lt;&lt; <span class="bu">std::</span>endl;  <span class="co">// 0</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true"></a>    <span class="bu">std::</span>vector&lt;<span class="dt">bool</span>&gt; v3(<span class="dv">3</span>);</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true"></a>    <span class="bu">std::</span>cout &lt;&lt; v3[<span class="dv">0</span>] &lt;&lt; <span class="bu">std::</span>endl;  <span class="co">// 0</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true"></a>}</span></code></pre></div>
<h2 id="tuple"><code>tuple</code></h2>
<p><a href="https://en.cppreference.com/w/cpp/utility/tuple">https://en.cppreference.com/w/cpp/utility/tuple</a></p>
<p>An example adapted from cppreference:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true"></a><span class="pp">#include</span><span class="im">&lt;iostream&gt;</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true"></a><span class="pp">#include</span><span class="im">&lt;tuple&gt;</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true"></a><span class="dt">int</span> main() {</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true"></a>    <span class="bu">std::</span>tuple&lt;<span class="dt">int</span>, <span class="dt">char</span>, <span class="bu">std::</span>string&gt; ics;</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true"></a>    ics = {<span class="dv">5</span>, <span class="ch">&#39;a&#39;</span>, <span class="st">&quot;hello&quot;</span>};</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true"></a>    <span class="bu">std::</span>cout &lt;&lt; <span class="st">&quot;ics[0]: &quot;</span> &lt;&lt; <span class="bu">std::</span>get&lt;<span class="dv">0</span>&gt;(ics) &lt;&lt; <span class="bu">std::</span>endl;</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true"></a>    <span class="bu">std::</span>cout &lt;&lt; <span class="st">&quot;ics[1]: &quot;</span> &lt;&lt; <span class="bu">std::</span>get&lt;<span class="dv">1</span>&gt;(ics) &lt;&lt; <span class="bu">std::</span>endl;</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true"></a>    <span class="bu">std::</span>cout &lt;&lt; <span class="st">&quot;ics[2]: &quot;</span> &lt;&lt; <span class="bu">std::</span>get&lt;<span class="dv">2</span>&gt;(ics) &lt;&lt; <span class="bu">std::</span>endl;</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true"></a></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true"></a>    <span class="co">// Getting values in a tuple to vars.</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true"></a>    <span class="co">// Types auto-inferred due to the &#39;auto&#39; use.</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true"></a>    <span class="co">// The is a C++17 feature named &#39;structured binding&#39;.</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true"></a>    <span class="co">// GCC (&gt;=7 only) needs -std=c++17</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true"></a>    <span class="kw">auto</span> [ival, cval, sval] = ics;</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true"></a></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true"></a>    <span class="bu">std::</span>cout &lt;&lt; <span class="bu">std::</span>endl;</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true"></a>    <span class="bu">std::</span>cout &lt;&lt; <span class="st">&quot;ival: &quot;</span> &lt;&lt; ival &lt;&lt; <span class="bu">std::</span>endl;</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true"></a>    <span class="bu">std::</span>cout &lt;&lt; <span class="st">&quot;cval: &quot;</span> &lt;&lt; cval &lt;&lt; <span class="bu">std::</span>endl;</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true"></a>    <span class="bu">std::</span>cout &lt;&lt; <span class="st">&quot;sval: &quot;</span> &lt;&lt; sval &lt;&lt; <span class="bu">std::</span>endl;</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true"></a></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true"></a>    <span class="co">// Could also be done with std::tie for tuple, but is more verbose.</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true"></a>    <span class="dt">int</span> ival2;</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true"></a>    <span class="dt">char</span> cval2;</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true"></a>    <span class="bu">std::</span>string sval2;</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true"></a>    <span class="bu">std::</span>tie(ival2, cval2, sval2) = ics;</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true"></a></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true"></a>    <span class="bu">std::</span>cout &lt;&lt; <span class="bu">std::</span>endl;</span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true"></a>    <span class="bu">std::</span>cout &lt;&lt; <span class="st">&quot;ival2: &quot;</span> &lt;&lt; ival2 &lt;&lt; <span class="bu">std::</span>endl;</span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true"></a>    <span class="bu">std::</span>cout &lt;&lt; <span class="st">&quot;cval2: &quot;</span> &lt;&lt; cval2 &lt;&lt; <span class="bu">std::</span>endl;</span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true"></a>    <span class="bu">std::</span>cout &lt;&lt; <span class="st">&quot;sval2: &quot;</span> &lt;&lt; sval2 &lt;&lt; <span class="bu">std::</span>endl;</span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true"></a>}</span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true"></a></span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true"></a><span class="co">/*</span></span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true"></a><span class="co">ics[0]: 5</span></span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true"></a><span class="co">ics[1]: a</span></span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true"></a><span class="co">ics[2]: hello</span></span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true"></a></span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true"></a><span class="co">ival: 5</span></span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true"></a><span class="co">cval: a</span></span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true"></a><span class="co">sval: hello</span></span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true"></a></span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true"></a><span class="co">ival2: 5</span></span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true"></a><span class="co">cval2: a</span></span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true"></a><span class="co">sval2: hello</span></span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true"></a><span class="co">*/</span></span></code></pre></div>
<p>Similar:</p>
<ul>
<li><code>std::pair</code>: <a href="https://en.cppreference.com/w/cpp/utility/pair">https://en.cppreference.com/w/cpp/utility/pair</a></li>
</ul>
<h3 id="structured-binding-c17">Structured binding (C++17)</h3>
<p>Allows the constitutent values of a compound type to be assigned to variables.</p>
<p>See:</p>
<ul>
<li><a href="https://alandefreitas.github.io/moderncpp/basic-syntax/basic-data-types/structured-binding/">https://alandefreitas.github.io/moderncpp/basic-syntax/basic-data-types/structured-binding/</a></li>
<li><a href="https://devblogs.microsoft.com/oldnewthing/20201014-00/?p=104367">https://devblogs.microsoft.com/oldnewthing/20201014-00/?p=104367</a></li>
<li><a href="https://gcc.gnu.org/projects/cxx-status.html">https://gcc.gnu.org/projects/cxx-status.html</a></li>
</ul>
<h2 id="template-meta-programming-tmp">Template meta-programming (TMP)</h2>
<p>An example from the internet:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true"></a><span class="kw">template</span>&lt;<span class="dt">int</span> Depth, <span class="dt">int</span> A, <span class="kw">typename</span> B&gt;</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true"></a><span class="kw">struct</span> K17 {</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true"></a><span class="at">static</span> <span class="at">const</span> <span class="dt">int</span> x =</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true"></a>K17 &lt;Depth+<span class="dv">1</span>, <span class="dv">0</span>, K17&lt;Depth,A,B&gt; &gt;::x</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true"></a>+ K17 &lt;Depth+<span class="dv">1</span>, <span class="dv">1</span>, K17&lt;Depth,A,B&gt; &gt;::x</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true"></a>+ K17 &lt;Depth+<span class="dv">1</span>, <span class="dv">2</span>, K17&lt;Depth,A,B&gt; &gt;::x</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true"></a>+ K17 &lt;Depth+<span class="dv">1</span>, <span class="dv">3</span>, K17&lt;Depth,A,B&gt; &gt;::x</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true"></a>+ K17 &lt;Depth+<span class="dv">1</span>, <span class="dv">4</span>, K17&lt;Depth,A,B&gt; &gt;::x;</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true"></a>};</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true"></a><span class="kw">template</span> &lt;<span class="dt">int</span> A, <span class="kw">typename</span> B&gt;</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true"></a><span class="kw">struct</span> K17 &lt;<span class="dv">16</span>,A,B&gt; {</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true"></a>    <span class="at">static</span> <span class="at">const</span> <span class="dt">int</span> x = <span class="dv">1</span>;</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true"></a>};</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true"></a><span class="at">static</span> <span class="at">const</span> <span class="dt">int</span> z = K17 &lt;<span class="dv">0</span>,<span class="dv">0</span>,<span class="dt">int</span>&gt;::x;</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true"></a><span class="dt">int</span> main(<span class="dt">void</span>) { }</span></code></pre></div>
<p>See:</p>
<ul>
<li><a href="https://github.com/edouarda/brigand">https://github.com/edouarda/brigand</a></li>
<li><em>Practical C++ metaprogramming</em> - Edouard Alligand, Joel Falcou</li>
<li><em>Advanced C++ metaprogramming in classic C++</em> - Davide Di Gennaro</li>
</ul>
<h3 id="original-program">Original program</h3>
<p>(Thanks to Kevin for introducing me to this.)</p>
<p>The example program which drew lot of attention to TMP in C++: <a href="http://www.erwin-unruh.de/primorig.html">http://www.erwin-unruh.de/primorig.html</a></p>
<ul>
<li><a href="https://www.linkedin.com/pulse/template-metaprogramming-how-all-started-rainer-grimm">https://www.linkedin.com/pulse/template-metaprogramming-how-all-started-rainer-grimm</a></li>
</ul>
<p>The original version is no longer valid CPP, but a version here works.</p>
<ul>
<li><a href="https://stackoverflow.com/questions/48849447/does-example-of-erwin-unruh-work-today">https://stackoverflow.com/questions/48849447/does-example-of-erwin-unruh-work-today</a></li>
</ul>
<div class="sourceCode" id="cb4"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true"></a><span class="pp">#ifndef LAST</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true"></a><span class="pp">#define LAST </span><span class="dv">18</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true"></a><span class="pp">#endif</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true"></a></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true"></a><span class="kw">enum</span> {</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true"></a>    IS_PRIME,</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true"></a>    NO_PRIME,</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true"></a>    CONTINUE  </span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true"></a>};</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true"></a></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true"></a><span class="kw">template</span> &lt;<span class="dt">int</span> candidate, <span class="dt">int</span> testValue&gt;</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true"></a><span class="kw">struct</span> Eval {</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true"></a>    <span class="kw">enum</span> { </span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true"></a>        mode = </span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true"></a>            testValue * testValue &gt; candidate ? IS_PRIME  :    </span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true"></a>            candidate % testValue == <span class="dv">0</span> ?        NO_PRIME  :</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true"></a>                                                CONTINUE</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true"></a>    };</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true"></a>};</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true"></a></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true"></a><span class="kw">template</span> &lt;<span class="dt">int</span> candidate, <span class="dt">int</span> prime, <span class="dt">int</span> mode &gt;</span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true"></a><span class="kw">struct</span> sieve {</span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true"></a>    <span class="kw">enum</span> { </span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true"></a>        next = prime + <span class="dv">1</span>,</span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true"></a>        isPrime = sieve&lt;candidate, next, </span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true"></a>                        Eval&lt;candidate, next&gt;::mode&gt;::isPrime</span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true"></a>    };</span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true"></a>};</span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true"></a></span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true"></a><span class="kw">template</span> &lt;<span class="dt">int</span> candidate, <span class="dt">int</span> prime&gt; </span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true"></a><span class="kw">struct</span> sieve&lt;candidate, prime, IS_PRIME&gt; {</span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true"></a>    <span class="kw">enum</span> { isPrime = IS_PRIME };</span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true"></a>};</span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true"></a></span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true"></a><span class="kw">template</span> &lt;<span class="dt">int</span> candidate, <span class="dt">int</span> prime&gt;</span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true"></a><span class="kw">struct</span> sieve&lt;candidate, prime, NO_PRIME &gt; {</span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true"></a>    <span class="kw">enum</span> { isPrime = NO_PRIME };</span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true"></a>};</span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true"></a></span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true"></a><span class="kw">template</span> &lt;<span class="dt">int</span> prime&gt;</span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true"></a><span class="kw">struct</span> test {</span>
<span id="cb4-42"><a href="#cb4-42" aria-hidden="true"></a>    <span class="kw">enum</span> {isPrime = sieve&lt;prime, <span class="dv">2</span>, Eval&lt;prime, <span class="dv">2</span>&gt;::mode&gt;::isPrime };</span>
<span id="cb4-43"><a href="#cb4-43" aria-hidden="true"></a>};</span>
<span id="cb4-44"><a href="#cb4-44" aria-hidden="true"></a></span>
<span id="cb4-45"><a href="#cb4-45" aria-hidden="true"></a><span class="kw">template</span> &lt;<span class="dt">int</span> prime, <span class="dt">int</span> isPrime&gt;</span>
<span id="cb4-46"><a href="#cb4-46" aria-hidden="true"></a><span class="kw">struct</span> show {                           </span>
<span id="cb4-47"><a href="#cb4-47" aria-hidden="true"></a>    <span class="at">static</span> <span class="dt">void</span> f() {</span>
<span id="cb4-48"><a href="#cb4-48" aria-hidden="true"></a>        show&lt;prime - <span class="dv">1</span>, test&lt;prime - <span class="dv">1</span>&gt;::isPrime &gt;::f();</span>
<span id="cb4-49"><a href="#cb4-49" aria-hidden="true"></a>    }</span>
<span id="cb4-50"><a href="#cb4-50" aria-hidden="true"></a>};</span>
<span id="cb4-51"><a href="#cb4-51" aria-hidden="true"></a></span>
<span id="cb4-52"><a href="#cb4-52" aria-hidden="true"></a><span class="kw">template</span> &lt;<span class="dt">int</span> prime&gt;</span>
<span id="cb4-53"><a href="#cb4-53" aria-hidden="true"></a><span class="kw">struct</span> show&lt;prime, IS_PRIME&gt; {</span>
<span id="cb4-54"><a href="#cb4-54" aria-hidden="true"></a>    <span class="at">static</span> <span class="dt">int</span> *f() {</span>
<span id="cb4-55"><a href="#cb4-55" aria-hidden="true"></a>        show&lt;prime - <span class="dv">1</span>, test&lt;prime - <span class="dv">1</span>&gt;::isPrime &gt;::f();</span>
<span id="cb4-56"><a href="#cb4-56" aria-hidden="true"></a></span>
<span id="cb4-57"><a href="#cb4-57" aria-hidden="true"></a>        <span class="dt">int</span> x;</span>
<span id="cb4-58"><a href="#cb4-58" aria-hidden="true"></a>        <span class="cf">return</span> &amp;x;</span>
<span id="cb4-59"><a href="#cb4-59" aria-hidden="true"></a>    }</span>
<span id="cb4-60"><a href="#cb4-60" aria-hidden="true"></a>};</span>
<span id="cb4-61"><a href="#cb4-61" aria-hidden="true"></a></span>
<span id="cb4-62"><a href="#cb4-62" aria-hidden="true"></a><span class="kw">template</span> &lt;&gt;</span>
<span id="cb4-63"><a href="#cb4-63" aria-hidden="true"></a><span class="kw">struct</span> show&lt;<span class="dv">1</span>, IS_PRIME&gt; {</span>
<span id="cb4-64"><a href="#cb4-64" aria-hidden="true"></a>    <span class="at">static</span> <span class="dt">void</span> f() {}</span>
<span id="cb4-65"><a href="#cb4-65" aria-hidden="true"></a>};</span>
<span id="cb4-66"><a href="#cb4-66" aria-hidden="true"></a></span>
<span id="cb4-67"><a href="#cb4-67" aria-hidden="true"></a><span class="kw">template</span> &lt;<span class="dt">int</span> prime&gt;</span>
<span id="cb4-68"><a href="#cb4-68" aria-hidden="true"></a><span class="dt">void</span> primes() {</span>
<span id="cb4-69"><a href="#cb4-69" aria-hidden="true"></a>    show&lt;prime, test&lt;prime&gt;::isPrime&gt;::f();</span>
<span id="cb4-70"><a href="#cb4-70" aria-hidden="true"></a>}</span>
<span id="cb4-71"><a href="#cb4-71" aria-hidden="true"></a></span>
<span id="cb4-72"><a href="#cb4-72" aria-hidden="true"></a><span class="dt">int</span> main() {</span>
<span id="cb4-73"><a href="#cb4-73" aria-hidden="true"></a>    <span class="co">// &#39;instantiation&#39; messages because of the suggested grep command</span></span>
<span id="cb4-74"><a href="#cb4-74" aria-hidden="true"></a>    <span class="kw">static_assert</span>(LAST &gt;= <span class="dv">2</span>, </span>
<span id="cb4-75"><a href="#cb4-75" aria-hidden="true"></a>        <span class="st">&quot;instantiation of LAST must be &gt;= 2&quot;</span>);</span>
<span id="cb4-76"><a href="#cb4-76" aria-hidden="true"></a></span>
<span id="cb4-77"><a href="#cb4-77" aria-hidden="true"></a>    primes&lt;LAST&gt;();</span>
<span id="cb4-78"><a href="#cb4-78" aria-hidden="true"></a></span>
<span id="cb4-79"><a href="#cb4-79" aria-hidden="true"></a>    <span class="kw">static_assert</span>(<span class="dv">0</span>, </span>
<span id="cb4-80"><a href="#cb4-80" aria-hidden="true"></a>        <span class="st">&quot;instantiation of compilation terminated&quot;</span>);</span>
<span id="cb4-81"><a href="#cb4-81" aria-hidden="true"></a>}</span></code></pre></div>
<p>Run with:</p>
<pre><code>$ g++ input.cpp -DLAST=30 2&gt;&amp;1 | grep &#39;instantiation of&#39;

input.cpp: In instantiation of ‘static int* show&lt;prime, 0&gt;::f() [with int prime = 29]’:
input.cpp: In instantiation of ‘static int* show&lt;prime, 0&gt;::f() [with int prime = 23]’:
input.cpp: In instantiation of ‘static int* show&lt;prime, 0&gt;::f() [with int prime = 19]’:
input.cpp: In instantiation of ‘static int* show&lt;prime, 0&gt;::f() [with int prime = 17]’:
input.cpp: In instantiation of ‘static int* show&lt;prime, 0&gt;::f() [with int prime = 13]’:
input.cpp: In instantiation of ‘static int* show&lt;prime, 0&gt;::f() [with int prime = 11]’:
input.cpp: In instantiation of ‘static int* show&lt;prime, 0&gt;::f() [with int prime = 7]’:
input.cpp: In instantiation of ‘static int* show&lt;prime, 0&gt;::f() [with int prime = 5]’:
input.cpp: In instantiation of ‘static int* show&lt;prime, 0&gt;::f() [with int prime = 3]’:
input.cpp: In instantiation of ‘static int* show&lt;prime, 0&gt;::f() [with int prime = 2]’:
</code></pre>
<h3 id="constraints-and-concepts-c20">Constraints and concepts (C++20)</h3>
<ul>
<li>Used to restrict the type of arguments that can be passed to a template</li>
<li><a href="https://en.cppreference.com/w/cpp/language/constraints">https://en.cppreference.com/w/cpp/language/constraints</a></li>
</ul>
<h2 id="miscellaneous">Miscellaneous</h2>
<ul>
<li><code>__FUNCTION__</code> (non-standard): macro giving name of current function in gcc</li>
</ul>
</div>
</body>
</html>
